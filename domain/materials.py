# domain/materials.py

# Основные категории материалов
MATERIAL_CATEGORIES = {
    "metal": [
        "алюминий", "сталь", "титан", "медь", "латунь", "бронза", "никель", "цинк"
    ],
    "plastic": [
        "пвх", "полиэтилен", "полиамид", "нейлон", "пластик", "полипропилен"
    ],
    "wood": [
        "сосна", "берёза", "дуб", "фанера", "мдф", "дсп"
    ],
    "composite": [
        "углепластик", "стеклопластик", "карбон"
    ]
}

# Марки металлов / специальных материалов
MATERIAL_GRADES = {
    "сталь": ["сталь 45", "сталь 20", "сталь 40х", "сталь 12х18н10т"],
    "алюминий": ["алюминий 6061", "алюминий 2024", "алюминий 7075"],
    "титан": ["титан ВТ1-0", "титан ВТ6"],
    "медь": ["медь М1", "медь М2"],
    "латунь": ["латунь Л63", "латунь Л68"],
    "пвх": ["пвх-U", "пвх-C"],
    "нейлон": ["нейлон 6", "нейлон 66"]
}


def normalize_material(text: str) -> str:
    """
    Определяет категорию и нормализует материал.
    Например, 'сталь 45' -> 'сталь'
    """
    text_lower = text.lower()

    # Проверяем марки
    for base, grades in MATERIAL_GRADES.items():
        for grade in grades:
            if grade.lower() in text_lower:
                return base

    # Проверяем категории
    for category, mats in MATERIAL_CATEGORIES.items():
        for mat in mats:
            if mat in text_lower:
                return mat

    return None  # если не нашли
