# ARCHITECTURE.md

## Архитектура Системы «СТАНКО-ИИ» (День 1)

### **Цель дня**
К концу дня бот должен:
✅ выглядеть как ИИ
✅ не зацикливаться на вопросах  
✅ понимать контекст
✅ уметь делать предположения
✅ работать стабильно

❌ Без расчётов
❌ Без LLM
✅ Только логика

### **Поток данных**
1. Telegram сообщение → парсер → контекст → предположения → ответ

### **Ключевые компоненты**
- **context.py** - единый объект состояния (САМОЕ ВАЖНОЕ)
- **parser.py** - простой парсер ключевых слов
- **assumptions.py** - двигатель предположений ("магия ИИ")
- **human_recommendations.py** - понятные советы для оператора
- **handler.py** - главный обработчик сообщений
- **telegram_bot.py** - минимальная обертка для Telegram

### **Принципы**
- Один источник истины (контекст)
- Предположения вместо лишних вопросов
- Человечный язык общения
- Постепенное уточнение
- 
cnc-assistant/
│
├── app/
│   ├── main.py                # Точка входа
│   │
│   ├── bot/
│   │   ├── telegram_bot.py    # Telegram-обвязка
│   │   ├── cli_bot.py         # CLI (для отладки)
│   │   └── prompts.py         # Тексты вопросов (вариативность)
│   │
│   ├── core/
│   │   ├── state_machine.py   # Логика диалога (FSM)
│   │   ├── intent_parser.py   # Разбор текста (без LLM)
│   │   └── validator.py       # Проверка данных
│   │
│   ├── domain/
│   │   ├── materials.py       # Материалы (модель)
│   │   ├── operations.py      # Операции
│   │   ├── machines.py        # Станки
│   │   └── tools.py           # Инструмент (пока минимум)
│   │
│   ├── services/
│   │   ├── recommendation.py  # Расчёт режимов
│   │   ├── experience.py      # Коэф. опыта (пассивный сбор)
│   │   └── memory.py          # Работа с памятью
│   │
│   └── storage/
│       ├── db.py              # SQLite init
│       ├── models.py          # ORM / схемы таблиц
│       └── migrations.sql
│
├── data/
│   └── rules/
│       └── cutting_modes.yaml # Базовые режимы (НЕ хардкод)
│
├── storage/
│   └── cnc.db                 # База данных
│
├── README.md
└── requirements.txt


